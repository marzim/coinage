{% extends "index.html" %}
{% block title %}Customers{% endblock %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block content %}
{{ super() }}
{% endblock %}
{% block container %}
{{ super() }}
{% endblock %}
{% block membercontent %}
<ul class="nav nav-tabs actions-nav">
  <li class="active">
    <a href="#">List ({{ query_customers.count() }})</a>
  </li>
  {% if  current_user.can_create: %}
  <li>
    <a href="/customers/new" title="Create New Customer">Create</a>
  </li>
  {% endif %}
</ul>
  <table class="table table-striped table-bordered table-condensed">
    <thead>
      <tr>
        {% if  current_user.can_update: %}
          <th class="col-md-1"></th>
        {% endif %}
        {% if current_user.can_delete: %}
          <th class="col-md-1"></th>
        {% endif %}
          <th class="column-header">Name</th>
          <th class="column-header"># of Shares</th>
          <th class="column-header">Email</th>
          <th class="column-header">Contact #</th>
      </tr>
    </thead>
    <tbody>
      {% for customer in query_customers: %}
          <tr>
              {% if current_user.can_update : %}
              <td align="center">
                <a href="/customers/edit/{{ customer.id }}" data-toggle="tooltip" title="Edit Customer: {{ customer.first_name }} {{ customer.last_name }}">
                  <span class="glyphicon glyphicon-pencil"></span>
                </a>
              </td>
              {% endif %}
              {% if current_user.can_delete : %}
              <td align="center" >
                <a href="#ConfirmDeleteModal" role="button" data-toggle="modal" class='confirmDeleteCustomer' data-userid="{{ customer.id }}" data-username="{{ customer.first_name }} {{ customer.last_name }}" title="Delete Customer: {{ customer.first_name }} {{ customer.last_name }}">
                    <span class="glyphicon glyphicon-trash"></span>
                </a>
                </td>
              {% endif %}
              <td>{{ customer.first_name }}  {{ customer.last_name }}</td>
              <td>{{ customer.number_shares }}</td>
              <td>{{ customer.email }}</td>
              <td>{{ customer.mobile_phone }}</td>
          </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endblock %}

